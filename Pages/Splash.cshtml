@page "/splash"
@model SplashModel
<div class="text-center container">
  <h1>Acid December</h1>

@*     <div class="video-container">
        <video id="splashVideo" width="1200px" height="670px" controls background="black" style="object-fit: cover;"
            border="0">
            <source src="https://storage.googleapis.com/acid-december2012/2024/Aci2web.mp4" type="video/mp4" />
            <!-- This is A acid house video -->
        </video>
    </div>

    @section Scripts {
        <script>
            const vid = document.getElementById("splashVideo");
            vid.addEventListener("ended", function () {
                window.location.href = "/2024"; // Adjust path as needed
            });
        </script>
    }
 *@/




@foreach (AcidDec.Models.Song artist in Model?.Artists)
{
    <div class="col-12">
      <h3>
      
        <div class="artist-entry">
          <span class="artist-name">@artist.Artist</span>
        
        </div>
        <div class="song-entries" style="display:none;">
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          document.querySelectorAll(".artist-name").forEach(function (artistNameElem, idx) {
            artistNameElem.addEventListener("click", function () {
        const songEntries = artistNameElem.closest(".artist-entry").nextElementSibling;
        if (songEntries && songEntries.classList.contains("song-entries")) {
          songEntries.style.display = songEntries.style.display === "none" ? "block" : "none";
        }
            });
          });
        });
      </script>
        @foreach (AcidDec.Models.Song song in Model?.Songs)
        {
          @if (song.Artist == artist.Artist)
          {
            <div class="song-entry">
              <strong>@song.Title</strong>
              <br />
              @song.Publishdate?.ToDateTime().ToString("yyyy")
              <br />
              <audio id="audio-@song.Id" src="@song.Tune"></audio>
              <button type="button" class="play-btn" data-audio="audio-@song.Id">Play</button>
              @if (!string.IsNullOrEmpty(artist.Artistlink))
              {
                <button onclick="window.open('https://@artist.Artistlink', '_blank')">More</button>
              }
            </div>
          }
        }
        </div>
        </div>
}   </h3>
  
  <div class="col-12">
 

  </div>

@section Scripts {
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelectorAll(".play-btn").forEach(function (btn) {
        btn.addEventListener("click", function () {
          const audio = document.getElementById(btn.getAttribute("data-audio"));
          if (audio.paused) {
            audio.play();
            btn.textContent = "Stop";
          } else {
            audio.pause();
            btn.textContent = "Play";
          }
        });
      });
    });
  </script>
}